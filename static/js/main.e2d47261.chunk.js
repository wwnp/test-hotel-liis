(this["webpackJsonptest-hotel-liis"]=this["webpackJsonptest-hotel-liis"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(4),r=n(37),s=n(0),i=n(32),o=n(2),l=function(e){var t=e.size,n=void 0===t?"16px":t,c=e.isFav,a=e.onClick,r=!0===c?"red":"grey";return console.log(r),Object(o.jsx)(s.b.Provider,{value:{color:r,size:n},children:Object(o.jsx)("span",{onClick:a,children:Object(o.jsx)(i.b,{className:"pointer"})})})},j=function(e){var t=e.color,n=void 0===t?"yellow":t,c=e.size,a=void 0===c?"16px":c;return Object(o.jsx)(s.b.Provider,{value:{color:n,size:a},children:Object(o.jsx)("span",{children:Object(o.jsx)(i.a,{})})})},d=n(9),b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,u=/.{8,}/,O={year:"numeric",month:"long",day:"numeric"},x="RATE",m="PRICE";function p(e){return e>=5?"\u0434\u043d\u0435\u0439":e>=2?"\u0434\u043d\u044f":"\u0434\u0435\u043d\u044c"}var h="SET_TEST",f="SET_HOTELS",v="START_LOADING",g="END_LOADING",y="SET_REQUEST",N="SET_FAV",_="SET_MODE_RATE",S="SET_MODE_PRICE",w=function(e){for(var t=e.hotel,n=Object(d.d)(),c=Object(d.e)((function(e){return e.homepage.request})),a=c.date,r=c.days,s=t.hotelName,i=t.stars,b=t.priceAvg,u=[],x=0;x<i;x++)u.push("gold");for(var m=5-u.length,h=0;h<m;h++)u.push("grey");return Object(o.jsxs)("div",{className:"d-flex justify-between align-center",style:{borderBottom:"1px solid #ccc",paddingBottom:"10px "},children:[Object(o.jsx)("div",{className:"d-flex align-center",children:Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{className:"HomePage__FavName",children:s}),Object(o.jsxs)("p",{children:[new Date(a).toLocaleDateString("ru-RU",O)," -- ",r," ",p(r)]}),u.map((function(e,t){return Object(o.jsx)(j,{color:e},e+t+(new Date).toLocaleString())}))]})}),Object(o.jsxs)("div",{className:"d-flex flex-column align-end align-center",children:[Object(o.jsx)(l,{size:"24px",isFav:!0,onClick:function(){return n({type:N,payload:t})}}),Object(o.jsxs)("p",{className:"text-muted",children:["price: ",Object(o.jsxs)("span",{className:"HomePage__price ml-2",children:[parseInt(b),"p"]})]})]})]})},E=function(){var e,t=Object(d.d)(),n=Object(d.e)((function(e){return e.homepage.favs})),c=Object(d.e)((function(e){return e.homepage.favMode}));c===x&&(e=n.sort((function(e,t){return e.stars-t.stars}))),c===m&&(e=n.sort((function(e,t){return e.priceAvg-t.priceAvg}))),e.reverse();for(var s=[],i=0;i<e.length;i++){var l=n[i];if(i>=3)break;s.push(Object(a.a)({},l))}return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h2",{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(o.jsxs)("div",{className:"d-flex align-center",children:[Object(o.jsxs)("button",{className:"btn d-flex align-center mr-1 btn-sm ".concat(c===x&&"btn-active"),onClick:function(){return t({type:_})},children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433 ",Object(o.jsx)(r.a,{})]}),Object(o.jsxs)("button",{className:"btn d-flex align-center btn-sm ".concat(c===m&&"btn-active"),onClick:function(){return t({type:S})},children:["\u0426\u0435\u043d\u0430 ",Object(o.jsx)(r.a,{})]})]}),s.map((function(e){return Object(o.jsx)(w,{hotel:e},e.hotelId)}))]})},k=n(34),D=function(e){var t=e.type;return t?Object(o.jsx)("small",{id:"emailHelp",className:"form-text invalid",children:t.message}):Object(o.jsx)("small",{id:"emailHelp",className:"form-text system-text",children:"[system_text]"})},I=function(){var e=Object(d.d)(),t=Object(k.a)({mode:"onBlur"}),n=t.register,c=t.handleSubmit,r=t.formState.errors,s=Object(d.e)((function(e){return e.homepage.request})),i=s.location,l=s.date,j=s.days;return Object(o.jsxs)("form",{className:"d-flex flex-column align-end justify-between text-center",onSubmit:c((function(t){e({type:y,payload:t})})),children:[Object(o.jsxs)("div",{className:"input-group",children:[Object(o.jsx)("label",{className:"form-label",htmlFor:"username",children:"\u041b\u043e\u043a\u0430\u0446\u0438\u044f"}),Object(o.jsx)("input",Object(a.a)(Object(a.a)({},n("location",{required:"\u041b\u043e\u043a\u0430\u0446\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430",minLength:"\u0414\u043b\u0438\u043d\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u0438 \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u0440\u0435\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})),{},{className:"form-control",type:"text",defaultValue:i})),Object(o.jsx)(D,{type:null===r||void 0===r?void 0:r.location})]}),Object(o.jsxs)("div",{className:"input-group",children:[Object(o.jsx)("label",{className:"form-label",htmlFor:"password",children:"\u0414\u0430\u0442\u0430 \u0437\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u044f"}),Object(o.jsx)("input",Object(a.a)(Object(a.a)({},n("date",{required:"\u0414\u0430\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430"})),{},{className:"form-control",type:"date",id:"date",defaultValue:l,min:(new Date).toISOString().split("T")[0]})),Object(o.jsx)(D,{type:null===r||void 0===r?void 0:r.date})]}),Object(o.jsxs)("div",{className:"input-group",children:[Object(o.jsx)("label",{className:"form-label",htmlFor:"username",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043d\u0435\u0439"}),Object(o.jsx)("input",Object(a.a)(Object(a.a)({},n("days",{required:"\u0414\u043d\u0438 \u0437\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b"})),{},{className:"form-control",type:"number",defaultValue:j,min:1,max:7})),Object(o.jsx)(D,{type:null===r||void 0===r?void 0:r.days})]}),Object(o.jsx)("button",{className:"btn btn-hotel btn-w100",type:"submit",children:"\u041d\u0430\u0439\u0442\u0438"})]})},T=n(45),P=n(24),H=n.n(P),C=n(33),z=function(){var e=Object(C.f)();return Object(o.jsxs)("div",{className:"Header",children:[Object(o.jsx)("h2",{children:"Simple Hotel Check"}),Object(o.jsxs)("div",{className:"d-flex align-center pointer",onClick:function(){H.a.remove("tokenUser"),e.push("/login")},children:[Object(o.jsx)("button",{className:"btn-outline",children:"\u0412\u044b\u0439\u0442\u0438"}),Object(o.jsx)(s.b.Provider,{value:{color:"#41522E",className:"global-class-name"},children:Object(o.jsx)(T.a,{size:32})})]})]})},L=n(48),q=n(46),A=n.n(q),F=(n(42),n.p+"static/media/car1.b9017736.png"),M=n.p+"static/media/car2.d8412d00.png",R=n.p+"static/media/car3.6e508eab.png",U=function(e){return e.preventDefault()},B=[F,M,R,M,F,M,R].map((function(e,t){return Object(o.jsx)("img",{src:e,style:{width:"150px"},onDragStart:U,alt:t})})),V=function(){return Object(o.jsx)(A.a,{autoWidth:!0,mouseTracking:!0,items:B,controlsStrategy:"alternate",disableButtonsControls:!0,disableDotsControls:!0,infinite:!0})},X=n(47),G=function(e){var t=e.color,n=void 0===t?"#41522E":t,c=e.size,a=void 0===c?"32px":c;return Object(o.jsx)(s.b.Provider,{value:{color:n,size:a},children:Object(o.jsx)("span",{children:Object(o.jsx)(X.a,{})})})},J=function(e){for(var t=e.hotel,n=Object(d.d)(),c=Object(d.e)((function(e){return e.homepage.request})),a=c.date,r=c.days,s=t.hotelName,i=t.stars,b=t.priceAvg,u=t.hotelId,x=[],m=0;m<i;m++)x.push("gold");for(var h=5-x.length,f=0;f<h;f++)x.push("grey");var v=!1,g=Object(d.e)((function(e){return e.homepage.favs}));return g.forEach((function(e){e.hotelId===u&&(v=!0)})),Object(o.jsxs)("div",{className:"d-flex justify-between align-center",style:{borderBottom:"1px solid #ccc",paddingBottom:"10px "},children:[Object(o.jsxs)("div",{className:"d-flex align-center",children:[Object(o.jsx)("div",{style:{padding:"24px"},children:Object(o.jsx)(G,{})}),Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{style:{fontSize:"17px"},children:s}),Object(o.jsxs)("p",{children:[new Date(a).toLocaleDateString("ru-RU",O)," -- ",r," ",p(r)]}),x.map((function(e,t){return Object(o.jsx)(j,{color:e},e+t+(new Date).toLocaleString())}))]})]}),Object(o.jsxs)("div",{className:"d-flex flex-column align-end align-center",children:[Object(o.jsx)(l,{size:"24px",isFav:v,onClick:function(){return n({type:N,payload:t})}}),Object(o.jsxs)("p",{className:"text-muted",children:["price: ",Object(o.jsxs)("span",{className:"HomePage__price ml-2",children:[parseInt(b),"p"]})]})]})]})},W=function(){return Object(o.jsx)("div",{className:"Loader",children:Object(o.jsxs)("div",{className:"lds-default",children:[Object(o.jsx)("div",{}),Object(o.jsx)("div",{}),Object(o.jsx)("div",{}),Object(o.jsx)("div",{}),Object(o.jsx)("div",{}),Object(o.jsx)("div",{}),Object(o.jsx)("div",{}),Object(o.jsx)("div",{}),Object(o.jsx)("div",{}),Object(o.jsx)("div",{}),Object(o.jsx)("div",{}),Object(o.jsx)("div",{})]})})},Z=function(){var e=Object(d.e)((function(e){return e.homepage.loading})),t=Object(d.e)((function(e){return e.homepage.hotels})),n=Object(d.e)((function(e){return e.homepage.favs})),c=Object(d.e)((function(e){return e.homepage.request})),a=c.date,r=c.location;return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"d-flex justify-between",children:[Object(o.jsxs)("div",{className:"d-flex align-center",children:[Object(o.jsx)("h3",{className:"Main__header",children:"\u041e\u0442\u0435\u043b\u0438"}),Object(o.jsx)(L.a,{className:"ml-1",size:32}),Object(o.jsx)("h3",{className:"Main__header ml-1",children:r})]}),Object(o.jsx)("h3",{style:{fontSize:"24px",fontWeight:400,color:"#41522E"},children:new Date(a).toLocaleDateString("ru-RU",O)})]}),Object(o.jsx)(V,{}),0===n.length?Object(o.jsx)("h3",{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}):Object(o.jsxs)("h3",{children:["\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435: ",n.length," \u043e\u0442\u0435\u043b\u044f"]}),Object(o.jsx)("div",{children:e?Object(o.jsx)(W,{}):t.map((function(e){return Object(o.jsx)(J,{hotel:e},e.hotelId)}))})]})},Q=function(){return Object(o.jsxs)("div",{className:"HomePage",children:[Object(o.jsx)(z,{}),Object(o.jsxs)("div",{className:"HomePage__grid container",children:[Object(o.jsx)("div",{className:"HomePage__filter HomePage__block",children:Object(o.jsx)(I,{})}),Object(o.jsx)("div",{className:"HomePage__main HomePage__block",children:Object(o.jsx)(Z,{})}),Object(o.jsx)("div",{className:"HomePage__fav HomePage__block",children:Object(o.jsx)(E,{})})]})]})},$=function(){var e=Object(C.f)();Object(c.useEffect)((function(){H.a.get("tokenUser")&&e.push("/")}),[]);var t=Object(k.a)({mode:"onBlur"}),n=t.register,r=t.handleSubmit,s=t.formState.errors;return Object(o.jsxs)("div",{className:"LoginPage",children:[Object(o.jsxs)("form",{className:"Hotel__form text-center",onSubmit:r((function(){H.a.set("tokenUser",Math.random().toString(36).substr(2),{expires:1}),e.push("/")})),children:[Object(o.jsx)("h3",{children:"Simple Hotel Check"}),Object(o.jsxs)("div",{className:"input-group",children:[Object(o.jsx)("label",{className:"form-label",htmlFor:"username",children:"\u041b\u043e\u0433\u0438\u043d"}),Object(o.jsx)("input",Object(a.a)(Object(a.a)({},n("login",{required:"\u041b\u043e\u0433\u0438\u043d \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d",pattern:{value:b,message:"Email pattern be like: example@test.com"}})),{},{className:"form-control",type:"email"})),Object(o.jsx)(D,{type:null===s||void 0===s?void 0:s.login})]}),Object(o.jsxs)("div",{className:"input-group",children:[Object(o.jsx)("label",{className:"form-label",htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(o.jsx)("input",Object(a.a)(Object(a.a)({},n("password",{required:"\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d",pattern:{value:u,message:"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}})),{},{className:"form-control",type:"password",id:"password"})),Object(o.jsx)(D,{type:null===s||void 0===s?void 0:s.password})]}),Object(o.jsx)("button",{className:"btn btn-hotel btn-w100",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(o.jsx)("div",{className:"LoginPage__bg"})]})},K=(n(100),n(101),n(102),function(e){var t=e.children;return H.a.get("tokenUser")?t:Object(o.jsx)(C.a,{to:{pathname:"/login"}})}),Y=n(30),ee=n.n(Y),te=n(26),ne=n(21),ce=n(50),ae=n(17),re={test:!1},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0,n=t.type;t.payload;return n===h?Object(a.a)(Object(a.a)({},e),{},{test:!0}):e},ie=n(11),oe={hotels:[],loading:!0,favs:[],request:{location:"\u041c\u043e\u0441\u043a\u0432\u0430",date:(new Date).toISOString().split("T")[0],days:1},favMode:m},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case f:return Object(a.a)(Object(a.a)({},e),{},{hotels:c});case v:return Object(a.a)(Object(a.a)({},e),{},{loading:!0});case g:return Object(a.a)(Object(a.a)({},e),{},{loading:!1});case y:return Object(a.a)(Object(a.a)({},e),{},{request:c});case N:var r=c,s=e.favs.findIndex((function(e){return e.hotelId===c.hotelId}));if(s<0){var i=Object(a.a)({},r);return Object(a.a)(Object(a.a)({},e),{},{favs:[].concat(Object(ie.a)(e.favs),[i])})}var o=e.favs.filter((function(e){return e.hotelId!==c.hotelId}));return Object(a.a)(Object(a.a)({},e),{},{favs:o});case _:return Object(a.a)(Object(a.a)({},e),{},{favMode:x});case S:return Object(a.a)(Object(a.a)({},e),{},{favMode:m});default:return e}},je=Object(ae.a)(),de=Object(ne.b)({test:se,homepage:le,router:Object(te.b)(je)}),be=n(7),ue=n.n(be),Oe=n(14),xe=n(12),me=n(15),pe=function(){var e=Object(me.a)(ue.a.mark((function e(t,n,c){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://engine.hotellook.com/api/v2/cache.json?location=".concat(t,"&currency=rub&checkIn=").concat(n,"&checkOut=").concat(c,"&limit=5"));case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),he=ue.a.mark(ye),fe=ue.a.mark(Ne),ve=ue.a.mark(_e),ge=ue.a.mark(Se);function ye(){var e,t,n,c,a,r,s,i,o,l;return ue.a.wrap((function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(Oe.c)((function(e){return e.homepage}));case 2:return e=j.sent,t=e.request,n=t.location,c=t.date,a=t.days,r=new Date(c),(s=new Date).setDate(r.getDate()+parseInt(a)),i=r.toISOString().split("T")[0],o=s.toISOString().split("T")[0],j.next=12,Object(Oe.a)(pe.bind(null,n,i,o));case 12:return l=j.sent,j.next=15,Object(Oe.b)({type:f,payload:l});case 15:return j.next=17,Object(Oe.b)({type:g});case 17:case"end":return j.stop()}}),he)}function Ne(){var e,t,n,c,a,r,s,i,o,l;return ue.a.wrap((function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(Oe.b)({type:v});case 2:return j.next=4,Object(Oe.c)((function(e){return e.homepage}));case 4:return e=j.sent,t=e.request,n=t.location,c=t.date,a=t.days,r=new Date(c),(s=new Date).setDate(r.getDate()+parseInt(a)),i=r.toISOString().split("T")[0],o=s.toISOString().split("T")[0],j.next=14,Object(Oe.a)(pe.bind(null,n,i,o));case 14:return l=j.sent,j.next=17,Object(Oe.b)({type:f,payload:l});case 17:return j.next=19,Object(Oe.b)({type:g});case 19:case"end":return j.stop()}}),fe)}function _e(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Oe.c)((function(e){return e.router.location.pathname}));case 2:if("/"!==e.sent){e.next=6;break}return e.next=6,Object(Oe.a)(ye);case 6:case"end":return e.stop()}}),ve)}function Se(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Oe.d)(xe.a,_e);case 2:return e.next=4,Object(Oe.d)(y,Ne);case 4:case"end":return e.stop()}}),ge)}var we=Object(ce.a)(),Ee="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):ne.c,ke=Object(ne.d)(de,Ee(Object(ne.a)(we)));we.run(Se);var De=ke;ee.a.render(Object(o.jsx)(d.a,{store:De,children:Object(o.jsx)(te.a,{history:je,children:Object(o.jsxs)(C.d,{children:[Object(o.jsx)(C.b,{path:"/login",exact:!0,children:Object(o.jsx)($,{})}),Object(o.jsx)(C.b,{path:"/",exact:!0,children:Object(o.jsx)(K,{children:Object(o.jsx)(Q,{})})})]})})}),document.getElementById("root"))}},[[104,1,2]]]);
//# sourceMappingURL=main.e2d47261.chunk.js.map